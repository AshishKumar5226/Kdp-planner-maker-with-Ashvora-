<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ashvora KDP Planner Builder 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --border-color: #e0e0e0;
            --accent-color: #333333;
        }

        body {
            font-family: 'Inter', Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            flex-direction: column;
        }

        /* Minimal Header */
        header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        /* Main Layout */
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Left Control Panel */
        .controls {
            width: 400px;
            min-width: 300px;
            padding: 30px;
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            background: #fafafa;
        }

        /* Right Preview Area */
        .preview-container {
            flex: 1;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px;
            overflow: auto;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            color: #555;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-sizing: border-box;
            font-family: inherit;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .btn-primary {
            width: 100%;
            padding: 15px;
            background-color: var(--text-color);
            color: var(--bg-color);
            border: none;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
            margin-top: 20px;
        }

        .btn-primary:hover {
            opacity: 0.9;
        }

        /* Checkbox style */
        .checkbox-group {
            display: flex;
            align-items: center;
        }
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }

        /* Preview Sheet Visualization */
        .preview-sheet {
            width: 425px; /* Proportional to 8.5 */
            height: 550px; /* Proportional to 11 */
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 30px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            border: 1px solid #eee;
        }

        .preview-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px; }
        .preview-subtitle { font-size: 1rem; color: #666; margin-bottom: 30px; }
        .preview-placeholder { color: #aaa; font-style: italic; font-size: 0.9rem; }

        /* Responsive */
        @media (max-width: 768px) {
            main { flex-direction: column; height: auto; }
            .controls { width: 100%; border-right: none; border-bottom: 1px solid var(--border-color); }
            .preview-container { height: 400px; }
            .preview-sheet { width: 300px; height: 388px; padding: 20px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>ðŸ§© Ashvora KDP Planner Builder 2026</h1>
    </header>

    <main>
        <section class="controls">
            <div class="form-group">
                <label for="topicSelect">1. Select Book / Planner Topic</label>
                <select id="topicSelect">
                    <optgroup label="Trending 2026">
                        <option value="planner_weekly">2026 Goal Setter / Weekly Planner</option>
                        <option value="journal_gratitude">Daily Gratitude Journal</option>
                        <option value="tracker_habit">Habit Tracker & Productivity</option>
                        <option value="journal_mindful">Mindfulness & Self-Love Diary</option>
                        <option value="planner_financial">Financial / Budget Planner</option>
                        <option value="tracker_workout">Workout & Health Tracker</option>
                        <option value="journal_guided">Minimal Guided Journal (Reflections)</option>
                    </optgroup>
                    <optgroup label="Specific Niche">
                        <option value="planner_content">Content Creator Planner</option>
                        <option value="journal_manifesting">Manifestation Book</option>
                        <option value="project_notebook">Project Notebook (Grid/Lines)</option>
                    </optgroup>
                </select>
            </div>

            <div class="form-group">
                <label for="bookTitle">2. Book Title (Cover)</label>
                <input type="text" id="bookTitle" placeholder="e.g., The 2026 Focus Planner">
            </div>

            <div class="form-group">
                <label for="bookSubtitle">3. Subtitle (Optional)</label>
                <input type="text" id="bookSubtitle" placeholder="e.g., Daily steps for big goals.">
            </div>

            <div class="form-group">
                <label for="authorName">4. Author Name (Optional)</label>
                <input type="text" id="authorName" placeholder="Your Name or Brand">
            </div>

            <div class="form-group">
                 <label for="pageCount">5. Page Count (50â€“200)</label>
                 <input type="number" id="pageCount" min="50" max="200" value="100">
            </div>

             <div class="form-group">
                <label for="styleSelect">6. Interior Style</label>
                <select id="styleSelect">
                    <option value="minimal">Minimalist Clean (Recommended)</option>
                    <option value="framed">Black Framed Borders</option>
                </select>
            </div>

            <div class="form-group checkbox-group">
                <input type="checkbox" id="taglineToggle" checked>
                <label for="taglineToggle" style="margin-bottom:0">7. Include Brand Tagline on last page?</label>
            </div>

            <button class="btn-primary" id="generateBtn">Download KDP-Ready PDF</button>
            <p style="text-align: center; margin-top: 10px; font-size: 0.8rem; color: #666;">Output is 8.5x11", 300DPI vector PDF, KDP margins safe.</p>
        </section>

        <section class="preview-container">
            <div class="preview-sheet">
                <div class="preview-title" id="previewTitleTxt">THE 2026 PLANNER</div>
                <div class="preview-subtitle" id="previewSubtitleTxt">Daily focus & clarity.</div>
                <div style="margin-top: 50px; border-top: 1px solid #eee; width: 50%;"></div>
                <div class="preview-placeholder" style="margin-top: 20px;">(Cover Page Preview)</div>
            </div>
        </section>
    </main>

    <script>
        // === KDP CONSTANTS ===
        // Using Points (pt) for precise PDF positioning.
        // 8.5 inch = 612pt, 11 inch = 792pt.
        const PAGE_WIDTH = 612;
        const PAGE_HEIGHT = 792;
        // Safe margin for KDP (approx 0.75 inch to be safe on all sides for no-bleed)
        const MARGIN = 54; 
        const CONTENT_WIDTH = PAGE_WIDTH - (MARGIN * 2);
        const LINE_COLOR = '#777777'; // Soft grey for lines
        const TEXT_COLOR = '#000000';

        const { jsPDF } = window.jspdf;

        // === UI Live Update ===
        const titleInput = document.getElementById('bookTitle');
        const subtitleInput = document.getElementById('bookSubtitle');
        const previewTitle = document.getElementById('previewTitleTxt');
        const previewSubtitle = document.getElementById('previewSubtitleTxt');

        titleInput.addEventListener('input', (e) => {
            previewTitle.innerText = e.target.value || "THE 2026 PLANNER";
        });
        subtitleInput.addEventListener('input', (e) => {
            previewSubtitle.innerText = e.target.value || "Daily focus & clarity.";
        });


        // === PDF GENERATION LOGIC ===
        document.getElementById('generateBtn').addEventListener('click', generatePDF);

        async function generatePDF() {
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.innerText = "Generating PDF...";
            generateBtn.disabled = true;

            // 1. Gather Inputs
            const topic = document.getElementById('topicSelect').value;
            const title = document.getElementById('bookTitle').value || "MY PLANNER";
            const subtitle = document.getElementById('bookSubtitle').value;
            const author = document.getElementById('authorName').value;
            let pageCount = parseInt(document.getElementById('pageCount').value);
            const style = document.getElementById('styleSelect').value;
            const useTagline = document.getElementById('taglineToggle').checked;

            // Validate Page Count constraints
            if (pageCount < 50) pageCount = 50;
            if (pageCount > 200) pageCount = 200;

            // Initialize jsPDF (Letter size 8.5x11 inches, points units)
            const doc = new jsPDF({
                orientation: 'portrait',
                unit: 'pt',
                format: 'letter'
            });

            // --- HELPER FUNCTIONS ---
            function drawLine(y) {
                doc.setDrawColor(LINE_COLOR);
                doc.setLineWidth(0.5);
                doc.line(MARGIN, y, PAGE_WIDTH - MARGIN, y);
            }
            
            function addTitle(text, y, size = 24, weight = 'bold') {
                doc.setFont("Helvetica", weight);
                doc.setFontSize(size);
                doc.setTextColor(TEXT_COLOR);
                doc.text(text, PAGE_WIDTH / 2, y, { align: 'center', maxWidth: CONTENT_WIDTH });
            }

            function drawBorderIfFramed() {
                 if (style === 'framed') {
                    doc.setDrawColor(LINE_COLOR);
                    doc.setLineWidth(1);
                    doc.rect(MARGIN - 10, MARGIN - 10, CONTENT_WIDTH + 20, PAGE_HEIGHT - (MARGIN * 2) + 20);
                }
            }

            // --- PAGE TYPES ---

            // 1. Cover Page
            doc.setFont("Helvetica", "bold");
            // Center vertically approx
            let currentY = PAGE_HEIGHT / 3;
            addTitle(title.toUpperCase(), currentY, 32, 'bold');
            currentY += 40;
            if (subtitle) {
                addTitle(subtitle, currentY, 16, 'normal');
            }
            currentY += 150;
            if (author) {
                 doc.setFontSize(12);
                 doc.text(author, PAGE_WIDTH / 2, currentY, { align: 'center' });
            }


            // 2. Interior Pages Loop
            // We start at page 2 and end before the last page.
            for (let i = 2; i < pageCount; i++) {
                doc.addPage();
                drawBorderIfFramed();
                doc.setFont("Helvetica", "normal");
                doc.setFontSize(11);
                doc.setTextColor(TEXT_COLOR);

                // TOPIC BASED LAYOUT SELECTION
                switch(topic) {
                    // --- WEEKLY / PLANNING LAYOUTS ---
                    case 'planner_weekly':
                    case 'planner_financial':
                    case 'planner_content':
                        let planY = MARGIN + 20;
                        doc.setFontSize(14).setFont(undefined, 'bold').text("Week of: _________________", MARGIN, planY);
                        planY += 40;
                        
                        // Top Priorities Box
                        doc.setDrawColor(LINE_COLOR).rect(MARGIN, planY, CONTENT_WIDTH, 80);
                        doc.setFontSize(12).text("Top Priorities", MARGIN + 10, planY + 20);
                        drawLine(planY + 40);
                        drawLine(planY + 60);
                        planY += 110;

                        // Simple Weekly Grid structure
                        const boxHeight = 70;
                        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday/Sunday'];
                        days.forEach(day => {
                             doc.setFontSize(11).setFont(undefined, 'bold').text(day, MARGIN, planY);
                             doc.setDrawColor(LINE_COLOR).rect(MARGIN, planY + 5, CONTENT_WIDTH, boxHeight - 25);
                             planY += boxHeight;
                        });
                        break;

                    // --- TRACKER / GRID LAYOUTS ---
                    case 'tracker_habit':
                    case 'tracker_workout':
                    case 'project_notebook':
                        let trackY = MARGIN + 30;
                        doc.setFontSize(16).setFont(undefined, 'bold').text(title + " Log", PAGE_WIDTH/2, trackY, {align:'center'});
                        trackY += 40;
                        
                        // Draw a basic grid
                        const rows = 25;
                        const rowHeight = 22;
                        doc.setDrawColor(LINE_COLOR);
                        doc.setLineWidth(0.5);
                        
                        // Header line
                        doc.line(MARGIN, trackY, PAGE_WIDTH - MARGIN, trackY);
                        
                        for(let r=0; r <= rows; r++) {
                            trackY += rowHeight;
                            doc.line(MARGIN, trackY, PAGE_WIDTH - MARGIN, trackY);
                        }
                        
                        // Vertical lines for columns (Topic specific columns)
                        if(topic.includes('habit')) {
                             // Habit Columns
                             doc.text("Habit / Goal", MARGIN + 5, MARGIN + 60);
                             doc.line(MARGIN + 150, MARGIN + 45, MARGIN + 150, trackY);
                             // Small checkboxes area
                             for(let c=1; c<8; c++) {
                                 doc.line(MARGIN + 150 + (c*45), MARGIN + 45, MARGIN + 150 + (c*45), trackY);
                             }
                        } else if (topic.includes('project')) {
                             // Project grid
                              doc.line(MARGIN + 100, MARGIN + 45, MARGIN + 100, trackY);
                              doc.line(PAGE_WIDTH - MARGIN - 100, MARGIN + 45, PAGE_WIDTH - MARGIN - 100, trackY);
                        }
                        break;

                    // --- JOURNAL / REFLECTION LAYOUTS (Default) ---
                    case 'journal_gratitude':
                    case 'journal_mindful':
                    case 'journal_guided':
                    case 'journal_manifesting':
                    default:
                        let journalY = MARGIN + 30;
                        doc.setFontSize(12);
                        // Date line
                        doc.text("Date: _________________", PAGE_WIDTH - MARGIN, journalY, { align: 'right' });
                        journalY += 50;

                        // Prompts based on topic
                        if(topic === 'journal_gratitude') {
                            doc.setFont(undefined, 'bold').text("Today I am grateful for:", MARGIN, journalY);
                            journalY += 30;drawLine(journalY);journalY += 30;drawLine(journalY);journalY += 30;drawLine(journalY);journalY += 50;
                            doc.setFont(undefined, 'bold').text("What would make today great?", MARGIN, journalY);
                            journalY += 30;drawLine(journalY);journalY += 30;drawLine(journalY);journalY += 50;
                        } else if (topic === 'journal_mindful') {
                             doc.setFont(undefined, 'bold').text("Current Mood / thoughts:", MARGIN, journalY);
                             journalY += 30;drawLine(journalY);journalY += 30;drawLine(journalY);journalY += 50;
                             doc.setFont(undefined, 'bold').text("Reflections & Intentions:", MARGIN, journalY);
                             journalY += 30;
                        } else {
                            // Generic Title if no specific prompt
                            doc.setFont(undefined, 'bold').text("Notes & Thoughts", MARGIN, journalY);
                             journalY += 30;
                        }

                        // Fill rest of page with lines
                        while (journalY < PAGE_HEIGHT - MARGIN - 20) {
                            drawLine(journalY);
                            journalY += 28; // Line spacing
                        }
                        break;
                }
                
                // Optional page numbering for interior
                doc.setFontSize(9).setFont(undefined, 'normal').setTextColor('#999999');
                doc.text(`${i}`, PAGE_WIDTH/2, PAGE_HEIGHT - 30, {align:'center'});
            }


            // 3. Final Page (Brand Tag)
            if (pageCount >= 2) {
                doc.addPage();
                doc.setFont("Helvetica", "normal");
                doc.setFontSize(10);
                doc.setTextColor("#666666");
                
                const lastPageY = PAGE_HEIGHT - MARGIN;
                
                if(useTagline) {
                    doc.setFont(undefined, 'bold');
                    doc.text("Made by ASHVORA", PAGE_WIDTH / 2, lastPageY - 20, { align: 'center' });
                    doc.setFont(undefined, 'normal');
                    doc.text("Â© 2026 All Rights Reserved.", PAGE_WIDTH / 2, lastPageY, { align: 'center' });
                } else {
                     // Minimal copyright even if toggle off, for safety
                     doc.text("Â© 2026", PAGE_WIDTH / 2, lastPageY, { align: 'center' });
                }
            }

            // 4. Save and Download
            // Clean filename
            const fileName = title.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '_KDP_8.5x11.pdf';
            doc.save(fileName);

            // Reset button state
            setTimeout(() => {
                generateBtn.innerText = "Download KDP-Ready PDF";
                generateBtn.disabled = false;
            }, 1000);
        }
    </script>
</body>
</html>